@tailwind base;
@tailwind components;
@tailwind utilities;
@plugin "@tailwindcss/typography";

:root,
html.light {
  --background: #ffffff;
  --foreground: #2d3748;
  --base: #f7fafc;
  --offbase: #e2e8f0;
  --accent: #ef4444;
  --secondary-accent: #ed6868;
  --muted: #718096;
  --prism-gradient: linear-gradient(90deg,
    #fecaca,
    #f87171,
    #ef4444
  );
}

html.dark {
  --background: #111111;
  --foreground: #ededed;
  --base: #171717;
  --offbase: #343434;
  --accent: #f87171;
  --secondary-accent: #eb6262;
  --muted: #a3a3a3;
  --prism-gradient: linear-gradient(90deg,
    #fca5a5,
    #fb7185,
    #f87171
  );
}

html.ocean {
  --background: #020617;
  --foreground: #e2e8f0;
  --base: #0f172a;
  --offbase: #1e293b;
  --accent: #38bdf8;
  --secondary-accent: #22d3ee;
  --muted: #94a3b8;
  --prism-gradient: linear-gradient(90deg,
    #7dd3fc,
    #38bdf8,
    #0ea5e9
  );
}

html.forest {
  --background: #0a0f0c;
  --foreground: #d4e8d0;
  --base: #111a15;
  --offbase: #1a2820;
  --accent: #4ade80;
  --secondary-accent: #22c55e;
  --muted: #7c8f85;
  --prism-gradient: linear-gradient(90deg,
    #86efac,
    #4ade80,
    #22c55e
  );
}

html.sunset {
  --background: #1a0f0f;
  --foreground: #ffe4d6;
  --base: #2c1810;
  --offbase: #3d1f14;
  --accent: #ff6b6b;
  --secondary-accent: #f59e0b;
  --muted: #bc8f8f;
  --prism-gradient: linear-gradient(90deg,
    #fca5a5,
    #fb7185,
    #ff6b6b
  );
}

html.sea {
  --background: #0c1922;
  --foreground: #e0f2fe;
  --base: #102c3d;
  --offbase: #1a3c52;
  --accent: #06b6d4;
  --secondary-accent: #0ea5e9;
  --muted: #7ca7c4;
  --prism-gradient: linear-gradient(90deg,
    #67e8f9,
    #22d3ee,
    #06b6d4
  );
}

html.mint {
  --background: #0f1916;
  --foreground: #dcfce7;
  --base: #132d27;
  --offbase: #1c3d35;
  --accent: #2dd4bf;
  --secondary-accent: #10b981;
  --muted: #75a99c;
  --prism-gradient: linear-gradient(90deg,
    #99f6e4,
    #5eead4,
    #2dd4bf
  );
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-display), -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-display), system-ui, -apple-system, sans-serif;
}

/*
 * PDF page turn smoothing
 * - Keep a stable paint surface (prevents background flash)
 * - Fade-in newly rendered canvas
 */
.pdf-page-stage {
  /* Ensure we always paint something (matches app theme) while react-pdf swaps canvases */
  background: var(--background);
  position: relative;
}

.pdf-viewer .react-pdf__Page {
  /* Make page paints more stable and avoid seeing the app background between renders */
  background: var(--background);
  isolation: isolate;
}

/* Fade-in the freshly rendered canvas (react-pdf replaces the canvas element). */
.pdf-viewer .react-pdf__Page canvas {
  display: block;
  background: var(--background);
  /* GPU hint; helps reduce flicker on some browsers */
  transform: translateZ(0);
  backface-visibility: hidden;
  opacity: 0;
  animation: pdf-canvas-fade-in 140ms ease-out forwards;
}

@keyframes pdf-canvas-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Hide react-pdf's default tiny "Loading page..." placeholder to avoid jarring layout shifts. */
.pdf-viewer .react-pdf__message {
  display: none !important;
}



/* App shell utility (fullscreen, vertical layout) */
.app-shell {
  --header-height: 3.25rem;
}

/* Themed overlay using foreground color without relying on /opacity classes */
.overlay-dim {
  background-color: color-mix(in srgb, var(--foreground), transparent 75%);
}

/* Scrollbar styling for better fullscreen experience */
*::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
*::-webkit-scrollbar-track {
  background: var(--base);
}
*::-webkit-scrollbar-thumb {
  background: var(--offbase);
  border-radius: 6px;
  border: 2px solid var(--base);
}
*::-webkit-scrollbar-thumb:hover {
  background: var(--muted);
}

/* Subtle prism animated outline around list items (very light), matches the row's rounded-lg curve exactly */
.prism-outline {
  position: relative;
  border: 1px solid transparent;
  /* do not set border-radius here; let the element's rounded-lg from Tailwind define the curve */
  background:
    linear-gradient(var(--card-fill, var(--offbase)), var(--card-fill, var(--offbase))) padding-box,
    var(--prism-gradient) border-box;
  background-clip: padding-box, border-box;
  background-size: 300% 300%;
  animation: prism-shift 8s linear infinite, prism-fade 3s ease-in-out infinite;
}

@keyframes prism-shift {
  0% { background-position: 0% 50%; }
  100% { background-position: 300% 50%; }
}

/* Gentle opacity pulse to simulate a "breath" without shadows spilling outside */
@keyframes prism-fade {
  0% { opacity: 0.8; }
  50% { opacity: 1.0; }
  100% { opacity: 0.8; }
}

/* Static prism gradient divider (no animation) */
.prism-divider {
  width: 100%;
  height: 0.7px; /* use 2px then feather for a crisper center */
  position: relative;
  border: 0;
  background: none;
  opacity: 0.95;
}
.prism-divider::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--prism-gradient);
  /* Feather edges so they appear thinner */
  mask: linear-gradient(90deg, transparent 0%, black 8%, black 92%, transparent 100%);
  -webkit-mask: linear-gradient(90deg, transparent 0%, black 8%, black 92%, transparent 100%);
  border-radius: 999px; /* subtle rounding to reinforce taper */
}
